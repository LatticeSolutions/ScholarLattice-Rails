<% if !local_assigns[:action] %>
  <%= render BreadcrumbsComponent.new(
    { icon: :collection, link: collections_path },
    *page.collection.ancestors.map do |c|
      { link: collection_path(c), text: c.short_title }
    end,
    { link: collection_path(page.collection), text: page.collection.short_title },
    { icon: :page, text: page.title }
  ) %>
<% elsif @page.new_record? %>
  <%= render BreadcrumbsComponent.new(
    { icon: :collection, link: collections_path },
    *page.collection.ancestors.map do |c|
      { link: collection_path(c), text: c.short_title }
    end,
    { link: collection_path(page.collection), text: page.collection.short_title },
    { icon: :page, text: action }
  ) %>
<% else %>
  <%= render BreadcrumbsComponent.new(
    { icon: :collection, link: collections_path },
    *page.collection.ancestors.map do |c|
      { link: collection_path(c), text: c.short_title }
    end,
    { link: collection_path(page.collection), text: page.collection.short_title },
    { icon: :page, link: page_path(page), text: page.title },
    { text: action }
  ) %>
<% end %>