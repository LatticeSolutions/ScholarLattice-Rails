<% content_for :title, "Registrations | #{@collection.title}" %>

<section class="mx-auto md:w-3/4 w-full">
    <%= render partial: "breadcrumb", locals: { collection: @collection } %>

    <% if notice.present? %>
      <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-lg inline-block" id="notice"><%= notice %></p>
    <% end %>
    
    <h1 class="text-2xl font-bold text-gray-900 md:text-3xl py-5">
        <%= @collection.title %>
    </h1>

    <div class="py-2">
        <%= link_to "New Registration", new_collection_registration_path(@collection), class: "bg-blue-500 hover:bg-blue-700 text-white py-2 px-4 rounded" %>
        <%= link_to "Download CSV", collection_submissions_path(@collection, format: :csv), class: "bg-green-500 hover:bg-green-700 text-white py-2 px-4 rounded" %>
    </div>

    <h2 class="text-xl font-medium text-gray-800 md:text-2xl py-3">
        <span class="size-4 inline-block">
            <%= render IconComponent.new(:key) %>
        </span>
        Registrations:
    </h2>
    <div class="grid grid-cols-1 gap-4 lg:grid-cols-3 lg:gap-8">
        <% @collection.registrations.each do |registration| %>
            <%= render partial: "registrations/card", locals: { registration: registration, collection: @collection } %>
        <% end %>
    </div>
    <div class="text-gray-700 py-3">
        Emails:
        <textarea class="w-full h-12 bg-gray-100 p-2" readonly><%= 
            @collection.registrations.map{|s| s.profile.email }.join("; ")
        %></textarea>
    </div>
</section>
